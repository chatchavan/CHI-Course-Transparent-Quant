---
title: "Prepare"
output: html_document
date: "2023-04-09"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Open this file in RStudio.

Install packages that you don't have following RStudio prompts.
(Look out for yellow banner above this source code file.)

If you are on Linux, and there's a problem installing the `tidyverse` packages, you may need to install some libraries. See this page: https://stackoverflow.com/questions/45719942/how-to-install-tidyverse-on-ubuntu-16-04-and-17-04#:~:text=6,openssl%2Ddev 

If you couldn't get it to work, plan to spend sometimes with us at the end of session 2. We will help you.


```{r setup, include=FALSE}
# session 3
library(tidyverse)
library(tidymodels)
library(modelr)
library(brms)
library(tidybayes)
library(ggdist)
library(distributional)
library(ordinal)
library(ggrepel)
library(glue)
library(emmeans)

# + session 2
library(gtools)
library(patchwork)
library(broom)
library(broom.mixed)
library(bayesplot)
library(knitr)
library(rmarkdown)

# + session 1 and 4
library(multcomp)
library(afex)
library(papaja)
```

# Testing
Run the following simple Bayesian model to verify `brms` installation.

```{r}
fit1 <- brm(count ~ zAge + zBase * Trt + (1|patient),
            data = epilepsy, family = poisson())
summary(fit1)
```

If this part runs without error and you see the last line of the output like the following, you are good to go!:
```
(at convergence, Rhat = 1).
```


Note: This model is from [the README file of the `brms` package](https://cran.r-project.org/web/packages/brms/readme/README.html). You do not need to read this file.


# Another way to install packages

If RStudio doesn't help you install, try `pacman`

```{r}
if (!require("pacman")) install.packages("pacman")
pacman::p_load(
  tidyverse, 
  tidymodels,
  modelr,
  brms,
  tidybayes,
  ggdist,
  distributional,
  ordinal,
  ggrepel,
  glue,
  emmeans,
  gtools,
  patchwork,
  broom,
  broom.mixed,
  bayesplot,
  knitr,
  rmarkdown,
  multcomp,
  afex,
  papaja
)
```

# Troubleshooting

1. In some cases, you may need to manually install the following packages for `brms` to work.

```{r}
# install.packages("igraph")
# install.packages("shiny")
```

2. Also try restarting your R session/RStudio. Choose the menu Session -> Restart R.


3. Try running `library()` one at a time. Install missing packages manually with `install.packages("the_missing_package")` If it doesn't work, keep a screenshot of the error message and move on to the next packages. 

If you couldn't get it to work, plan to spend sometimes with us at the end of session 2. We will help you.

